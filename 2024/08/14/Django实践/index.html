<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Django实践 | y0un92的知识库</title><meta name="author" content="y0un92"><meta name="copyright" content="y0un92"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="前言由于博主本学期开设了web程序设计这门课，于是为了进行开发，不得不学习python里面的一些web框架。早闻Django大名，遂开始学习，谨以此博客记录Django学习记录 前期准备安装Django作为一款优秀的python web框架，安装也是非常简单的。只需在命令行输入 pip install django 如果安装了anaconda也可以先新建一个虚拟环境来进行开发 conda crea"><meta property="og:type" content="article"><meta property="og:title" content="Django实践"><meta property="og:url" content="https://www.youngz-blog.asia/2024/08/14/Django%E5%AE%9E%E8%B7%B5/index.html"><meta property="og:site_name" content="y0un92的知识库"><meta property="og:description" content="前言由于博主本学期开设了web程序设计这门课，于是为了进行开发，不得不学习python里面的一些web框架。早闻Django大名，遂开始学习，谨以此博客记录Django学习记录 前期准备安装Django作为一款优秀的python web框架，安装也是非常简单的。只需在命令行输入 pip install django 如果安装了anaconda也可以先新建一个虚拟环境来进行开发 conda crea"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202407172343020.jpg"><meta property="article:published_time" content="2024-08-14T15:37:48.000Z"><meta property="article:modified_time" content="2024-09-18T15:09:36.359Z"><meta property="article:author" content="y0un92"><meta property="article:tag" content="Web框架"><meta property="article:tag" content="Web程序设计"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202407172343020.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.youngz-blog.asia/2024/08/14/Django%E5%AE%9E%E8%B7%B5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!0,top_n_per_article:1,unescape:!1,languages:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:500},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!0,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Django实践",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-09-18 23:09:36"}</script><script>(e=>{e.saveToLocal={set:(e,t,a)=>{if(0===a)return;const o={value:t,expiry:Date.now()+864e5*a};localStorage.setItem(e,JSON.stringify(o))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const a=JSON.parse(t);if(!(Date.now()>a.expiry))return a.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise(((a,o)=>{const c=document.createElement("script");c.src=e,c.async=!0,c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},Object.keys(t).forEach((e=>{c.setAttribute(e,t[e])})),document.head.appendChild(c)})),e.getCSS=(e,t=!1)=>new Promise(((a,o)=>{const c=document.createElement("link");c.rel="stylesheet",c.href=e,t&&(c.id=t),c.onerror=o,c.onload=c.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(c.onload=c.onreadystatechange=null,a())},document.head.appendChild(c)})),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","ffffff")};const t=saveToLocal.get("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,o=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!a&&!o&&!c;if(void 0===t){if(o)activateLightMode();else if(a)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=6||e>=18?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener((e=>{void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())}))}else"light"===t?activateLightMode():activateDarkMode();const d=saveToLocal.get("aside-status");void 0!==d&&("hide"===d?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/modify.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/icat.css"><link rel="stylesheet" href="tianli_gpt.css"><meta name="generator" content="Hexo 7.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202407172343020.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="y0un92的知识库"><span class="site-name">y0un92的知识库</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Django实践</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-14T15:37:48.000Z" title="发表于 2024-08-14 23:37:48">2024-08-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-18T15:09:36.359Z" title="更新于 2024-09-18 23:09:36">2024-09-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web%E5%BC%80%E5%8F%91/">Web开发</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web%E5%BC%80%E5%8F%91/Web%E6%A1%86%E6%9E%B6/">Web框架</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>14分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="Django实践"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><div id="postchat_postcontent"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>由于博主本学期开设了web程序设计这门课，于是为了进行开发，不得不学习python里面的一些web框架。早闻<code>Django</code>大名，遂开始学习，谨以此博客记录<code>Django</code>学习记录</p><h1 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><code>Django</code>作为一款优秀的<strong>python web框架</strong>，安装也是非常简单的。只需在命令行输入</p><figure class="highlight cmd"><table><tbody><tr><td class="code"><pre><span class="line">pip install django</span><br></pre></td></tr></tbody></table></figure><p>如果安装了<code>anaconda</code>也可以先新建一个虚拟环境来进行开发</p><figure class="highlight cmd"><table><tbody><tr><td class="code"><pre><span class="line">conda create -n django_test python=<span class="number">3</span>.<span class="number">10</span></span><br><span class="line">conda activate django_test</span><br><span class="line">pip install django</span><br></pre></td></tr></tbody></table></figure><p>安装完之后，<code>django</code>会自动添加<code>django-admin.exe</code>到环境目录。</p><p><img src="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202408142356150.png" alt="image-20240814235646017"></p><p>出现以上图片即说明安装成功。</p><p>如果要创建一个新的项目，运行</p><figure class="highlight cmd"><table><tbody><tr><td class="code"><pre><span class="line">django-admin startproject django_test</span><br></pre></td></tr></tbody></table></figure><p>则会出现以下目录</p><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">D:\DJANGO_TEST</span><br><span class="line">│─ manage.py            管理项目的文件。例如：运行、类自动生成数据表</span><br><span class="line">│</span><br><span class="line">└─django_test           </span><br><span class="line">        asgi.py         异步运行项目，编写socket，处理网络请求</span><br><span class="line">        settings.py     项目的配置文件、例如：连接的数据库的账户密码等等</span><br><span class="line">        urls.py         根路由，URL和函数的对应关系  /login-&gt;do_login</span><br><span class="line">        wsgi.py         同步运行项目，编写socket，处理网络请求</span><br><span class="line">        __init__.py</span><br></pre></td></tr></tbody></table></figure><h1 id="初识Django"><a href="#初识Django" class="headerlink" title="初识Django"></a>初识Django</h1><h2 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h2><p>在项目根目录运行</p><figure class="highlight cmd"><table><tbody><tr><td class="code"><pre><span class="line">python manage.py runserver</span><br></pre></td></tr></tbody></table></figure><p>django会自动启动一个web服务在<code>localhost:8000</code>，用浏览器访问会出现以下界面<br><img src="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202408150013176.png" alt="image-20240815001328887"></p><h2 id="自定义路由"><a href="#自定义路由" class="headerlink" title="自定义路由"></a>自定义路由</h2><p>刚刚提到django_test/urls.py是管理路由的地方，于是想着能不能自己写一个url访问，编写urls.py如下</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"登录页面"</span>)</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">"admin/"</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">"login/"</span>, login),</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><p>同时访问<code>localhost:8000/login</code>页面<br><img src="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202408150025795.png" alt="image-20240815002545677"></p><p>这样就自定义了一个页面<del>（虽然只有文本，也很丑）</del>，这是因为返回的是一个<code>HttpResponse</code>类的缘故，关于该类之后再详细介绍。</p><h2 id="自定义app"><a href="#自定义app" class="headerlink" title="自定义app"></a>自定义app</h2><p>前面介绍了<code>login()</code>函数，试想一下，如果正在做一个大工程，自定义的页面比较多，那么<code>urls.py</code>里面实现的函数就比较多，不利于开发，如果能把函数实现放在另一个文件里面定义，再在<code>urls.py</code>里面<code>import</code>更利于开发。因此引入<code>app</code></p><p>创建一个app，在命令行输入</p><figure class="highlight cmd"><table><tbody><tr><td class="code"><pre><span class="line">python manage.py startapp web</span><br></pre></td></tr></tbody></table></figure><p>这样就创建了一个叫<code>web</code>的app，此时目录结构应该长这样</p><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">D:\DJANGO_TEST</span><br><span class="line">│  db.sqlite3</span><br><span class="line">│  manage.py</span><br><span class="line">│</span><br><span class="line">├─django_test</span><br><span class="line">│  │  asgi.py</span><br><span class="line">│  │  settings.py</span><br><span class="line">│  │  urls.py</span><br><span class="line">│  │  wsgi.py</span><br><span class="line">│  │  __init__.py</span><br><span class="line">│  │</span><br><span class="line">│  └─__pycache__</span><br><span class="line">│          settings.cpython-39.pyc</span><br><span class="line">│          urls.cpython-39.pyc</span><br><span class="line">│          wsgi.cpython-39.pyc</span><br><span class="line">│          __init__.cpython-39.pyc</span><br><span class="line">│</span><br><span class="line">└─web</span><br><span class="line">    │  admin.py                 内部后台管理配置</span><br><span class="line">    │  apps.py                  App的名字</span><br><span class="line">    │  models.py                数据库操作，类-&gt;SQL语句（ORM）</span><br><span class="line">    │  tests.py                 单元测试</span><br><span class="line">    │  views.py                 主要写视图函数，例如上例中的login函数</span><br><span class="line">    │  __init__.py</span><br><span class="line">    │</span><br><span class="line">    └─migrations                迁移记录，自动生成，不要修改</span><br><span class="line">            __init__.py</span><br></pre></td></tr></tbody></table></figure><p>接下来，将login函数放到view.py里面<br><code>web/views.py</code></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"登录页面"</span>)</span><br></pre></td></tr></tbody></table></figure><p><code>django_test/urls.py</code></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> web.views <span class="keyword">import</span> login</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">"admin/"</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">"login/"</span>, login),</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><h2 id="初识视图函数"><a href="#初识视图函数" class="headerlink" title="初识视图函数"></a>初识视图函数</h2><ul><li><p>视图函数中的形参<code>request</code>是什么？ 用户请求相关的所有内容</p><p>在<code>request</code>中获取用户提交的数据等信息</p></li><li><p>视图函数主要是实现业务逻辑操作</p></li><li><p>返回业务逻辑结果，常见的返回有三种</p><p><code>return HttpResponse("登陆页面")</code> 返回的是一个文本，文本内容是传入的内容</p><p><code>return render(request,"login.html")</code> 返回一个<code>html</code>的网页</p><p><code>return redirect("https://www.baidu.com")</code> 重定向到另一个网页</p></li></ul><p>有一个问题，那么上述<code>login.html</code>放在哪呢？在<code>django_test</code>目录下面有一个<code>settings.py</code>文件<br><img src="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202408151046207.png" alt="image-20240815104607037"></p><p>默认会从<code>DIRS</code>目录里面寻找</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="string">"DIRS"</span>: [os.path.join(BASE_DIR, <span class="string">"templates"</span>)]</span><br></pre></td></tr></tbody></table></figure><p>之后在根目录(manage.py同级目录)创建一个<code>templates</code>文件夹，在里面编写<code>login.html</code>如下</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">        登录界面</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>然后编写视图函数<code>web/views.py</code></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse, redirect</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># return HttpResponse("登录页面")</span></span><br><span class="line">    <span class="comment"># return redirect("https://www.baidu.com")</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">"login.html"</span>)</span><br></pre></td></tr></tbody></table></figure><p>访问l<code>ocalhost:8000/login</code>就可以看到一个登录页面了。</p><p>还有一个寻找方案为在<code>settings.py</code>目录下，在<code>INSTALLED_APPS</code>项下面添加一项<code>”web“</code></p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">"django.contrib.admin"</span>,</span><br><span class="line">    <span class="string">"django.contrib.auth"</span>,</span><br><span class="line">    <span class="string">"django.contrib.contenttypes"</span>,</span><br><span class="line">    <span class="string">"django.contrib.sessions"</span>,</span><br><span class="line">    <span class="string">"django.contrib.messages"</span>,</span><br><span class="line">    <span class="string">"django.contrib.staticfiles"</span>,</span><br><span class="line">    <span class="string">"web"</span>,</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><p>之后在web目录下面，新建一个templates文件夹，编写<code>login1.html</code></p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">        登录界面111</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>访问发现显示<strong>登录界面111</strong>，说明配置成功。但是如果两个地方同时出现了<code>login.html</code> 呢，下面来测试一下，将<code>login1.html</code>重命名为<code>login.html</code>，发现页面显示为<strong>登录页面</strong></p><p><strong>结论：</strong>同时存在<code>templates</code>文件夹的时候，会优先在项目于根目录的<code>templates</code>寻找文件，其次在<code>app</code>文件夹下的<code>templates</code>目录寻找。因此，可以在网站根目录下的<code>templates</code>文件夹下面放公共的网页，在<code>app</code>文件夹下的<code>templates</code>文件夹放这个<code>app</code>所需要实现的网页。</p><h2 id="初识模板"><a href="#初识模板" class="headerlink" title="初识模板"></a>初识模板</h2><p>考虑如下一种情况，现在有一个公司的员工表，我希望在网页里面动态的显示出来，编写如下<code>user.html</code>文件</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>User<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">        1、张三</span><br><span class="line">        2、李四</span><br><span class="line">        3、王五</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>这样的网站肯定是静态的，如果员工表的内容改变，则必须一个一个修改。要想实现自动读取一个列表里面的名字并显示出来，就要采用模板里面的语法了。重新编写<code>user.html</code>如下</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>User<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">        {%for user in users%}</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            {{user}}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        {%endfor%}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>编写<code>views.py</code>定义<code>user</code>函数如下</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>(<span class="params">request</span>):</span><br><span class="line">    users = [<span class="string">"张三"</span>, <span class="string">"李四"</span>, <span class="string">"王五"</span>]</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">"user.html"</span>, {<span class="string">"users"</span>: users})</span><br></pre></td></tr></tbody></table></figure><p>在模板里面通过<code>{%for%}`以及`{%endfor%}</code>实现了for循环，如果要显示函数里面定义的变量则需要用<code>{{变量}}</code>，在函数的返回值里面就要用一个字典的形式来返回该变量。最后结果如图</p><p><img src="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202408151417046.png" alt="image-20240815141741971"></p><p>如果想在模板里面只读取一个列表元素，与python索引不同的地方在于模板的索引是用<code>.</code>来进行索引，例如<code>{{users.0}}</code></p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>User<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">        {%for user in users%}</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            {{user}}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        {%endfor%}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">        {{users.0}}</span><br><span class="line">        {{users.1}}</span><br><span class="line">        {{users.2}}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202408151423140.png" alt="image-20240815142351089"></p><p>如果定义的是一个字典呢，方法也差不多，<code>user.html</code>如下</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>User<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">        {%for user in users%}</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            {{user}}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        {%endfor%}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">        {{users.0}}</span><br><span class="line">        {{users.1}}</span><br><span class="line">        {{users.2}}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        {{info}}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        {{info.name}}</span><br><span class="line">        {{info.age}}</span><br><span class="line">        {{info.sex}}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">            keys:</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        {%for key in info.keys%}</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            {{key}}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        {%endfor%}</span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">            values:</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        {%for value in info.values%}</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            {{value}}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        {%endfor%}</span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">            items:</span><br><span class="line">        <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        {% for key, value in info.items%}</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">            {{key}}:{{value}}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        {%endfor%}</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>编写<code>views.py</code>如下</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">user</span>(<span class="params">request</span>):</span><br><span class="line">    users = [<span class="string">"张三"</span>, <span class="string">"李四"</span>, <span class="string">"王五"</span>]</span><br><span class="line">    info={<span class="string">"name"</span>:<span class="string">"张三"</span>,<span class="string">"age"</span>:<span class="number">18</span>,<span class="string">"sex"</span>:<span class="string">"男"</span>}</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">"user.html"</span>, {<span class="string">"users"</span>: users,<span class="string">"info"</span>: info})</span><br></pre></td></tr></tbody></table></figure><p>结果如图：</p><p><img src="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202408151439540.png" alt="image-20240815143903444"></p><h2 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h2><h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a>连接数据库</h3><p>首先需要连接数据库，在<code>setting.py</code>中(以MySQL为例)</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">DATABASES = {</span><br><span class="line">    <span class="string">'default'</span>: {</span><br><span class="line">        <span class="string">'ENGINE'</span>: <span class="string">'django.db.backends.mysql'</span>,</span><br><span class="line">        <span class="string">'NAME'</span>: <span class="string">'django'</span>, <span class="comment">#数据库的名字</span></span><br><span class="line">        <span class="string">'USER'</span>: <span class="string">'root'</span>, <span class="comment">#数据库账号</span></span><br><span class="line">        <span class="string">'PASSWORD'</span>: <span class="string">'123456'</span>, <span class="comment">#数据库密码</span></span><br><span class="line">        <span class="string">'HOST'</span>: <span class="string">'127.0.0.1'</span>, <span class="comment">#数据库ip</span></span><br><span class="line">        <span class="string">'PORT'</span>: <span class="string">'3306'</span>, <span class="comment">#数据库端口</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="定义数据表"><a href="#定义数据表" class="headerlink" title="定义数据表"></a>定义数据表</h3><p>定义数据库的实现主要在<code>model.py</code>页面</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    <span class="comment">#用户名是唯一的</span></span><br><span class="line">    username = models.CharField(max_length=<span class="number">32</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">64</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>上述定义了一个<code>UserInfo</code>类的表，有两列分别为：</p><ul><li>username：CharField=varchar</li><li>password：CharField=varchar</li></ul><h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3><p>但此时只是定义了一个类，并没有对数据库进行迁移，运行</p><figure class="highlight cmd"><table><tbody><tr><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line"></span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></tbody></table></figure><p>两条命令都需要执行，且顺序不能调换</p><p>此时会在定义的app目录下生成一个<code>migrations</code>文件夹</p><h3 id="添加数据项"><a href="#添加数据项" class="headerlink" title="添加数据项"></a>添加数据项</h3><p>在<code>views.py</code>文件中</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">register</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'GET'</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'register.html'</span>)</span><br><span class="line">    <span class="keyword">elif</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">'password'</span>)</span><br><span class="line">        <span class="keyword">if</span> UserInfo.objects.<span class="built_in">filter</span>(username=username).first():</span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">'register.html'</span>, {<span class="string">'error'</span>: <span class="string">'用户名已存在'</span>})</span><br><span class="line">        UserInfo.objects.create(username=username, password=password)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span>  render(request, <span class="string">'register.html'</span>, {<span class="string">'success'</span>: <span class="string">'注册成功'</span>})</span><br></pre></td></tr></tbody></table></figure><p>上述定义了注册用户的逻辑，编写<code>register.html</code>如下</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Register<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Register<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/register/"</span> <span class="attr">method</span>=<span class="string">"post"</span> &gt;</span></span><br><span class="line">            {% csrf_token %}</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">                    Username:</span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">                    Password:</span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Register"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                {{error}}</span><br><span class="line">                {{success}}</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>同时在<code>urls.py</code>中定义路由</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">path(<span class="string">"register/"</span>,register,name=<span class="string">"register"</span>),</span><br></pre></td></tr></tbody></table></figure><p>这样就可以完成一个简单的注册逻辑</p><h3 id="查找数据项"><a href="#查找数据项" class="headerlink" title="查找数据项"></a>查找数据项</h3><p>在<code>views.py</code>文件中</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'GET'</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'login.html'</span>)</span><br><span class="line">    <span class="keyword">elif</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        password = request.POST.get(<span class="string">'password'</span>)</span><br><span class="line">        user = UserInfo.objects.<span class="built_in">filter</span>(username=username, password=password).first()</span><br><span class="line">        <span class="keyword">if</span> user:</span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">'login.html'</span>, {<span class="string">'success'</span>: <span class="string">'登录成功'</span>})</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">'login.html'</span>, {<span class="string">'error'</span>: <span class="string">'用户名或密码错误'</span>})</span><br></pre></td></tr></tbody></table></figure><p>上述定义了登录的逻辑</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">user = UserInfo.objects.<span class="built_in">filter</span>(username=username, password=password).first()</span><br></pre></td></tr></tbody></table></figure><p><code>filter</code>意为<strong>过滤</strong>，所以该语句从<code>UserInfo</code>表里面查找是否有该用户名和密码，有多个则返回第一个。若<code>username</code>是<code>unique</code>则可以不用<code>first</code>方法。</p><p>编写<code>login.html</code>如下</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Register<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/login/"</span> <span class="attr">method</span>=<span class="string">"post"</span> &gt;</span></span><br><span class="line">            {% csrf_token %}</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">                    Username:</span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">                    Password:</span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Register"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                {{error}}</span><br><span class="line">                {{success}}</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>同时在<code>urls.py</code>中定义路由</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">path(<span class="string">"login/"</span>,login,name=<span class="string">"login"</span>)</span><br></pre></td></tr></tbody></table></figure><h3 id="更新数据项"><a href="#更新数据项" class="headerlink" title="更新数据项"></a>更新数据项</h3><p>在<code>view.py</code>文件中</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update_user</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        new_password = request.POST.get(<span class="string">'new_password'</span>)</span><br><span class="line">        user = UserInfo.objects.<span class="built_in">filter</span>(username=username).first()</span><br><span class="line">        <span class="keyword">if</span> user:</span><br><span class="line">            user.password = new_password</span><br><span class="line">            user.save()</span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">'update_user.html'</span>, {<span class="string">'success'</span>: <span class="string">'用户信息更新成功'</span>})</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">'update_user.html'</span>, {<span class="string">'error'</span>: <span class="string">'用户不存在'</span>})</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'update_user.html'</span>)</span><br></pre></td></tr></tbody></table></figure><p>直接获取新的密码，用<code>save</code>方法即可保存</p><h3 id="删除数据项"><a href="#删除数据项" class="headerlink" title="删除数据项"></a>删除数据项</h3><p>在<code>view.py</code>文件中</p><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delete_user</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">'POST'</span>:</span><br><span class="line">        username = request.POST.get(<span class="string">'username'</span>)</span><br><span class="line">        user = UserInfo.objects.<span class="built_in">filter</span>(username=username).first()</span><br><span class="line">        <span class="keyword">if</span> user:</span><br><span class="line">            user.delete()</span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">'delete_user.html'</span>, {<span class="string">'success'</span>: <span class="string">'用户删除成功'</span>})</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> render(request, <span class="string">'delete_user.html'</span>, {<span class="string">'error'</span>: <span class="string">'用户不存在'</span>})</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'delete_user.html'</span>)</span><br></pre></td></tr></tbody></table></figure><p>用<code>delete</code>方法即可删除数据项</p></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://www.youngz-blog.asia">y0un92</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://www.youngz-blog.asia/2024/08/14/Django%E5%AE%9E%E8%B7%B5/">https://www.youngz-blog.asia/2024/08/14/Django%E5%AE%9E%E8%B7%B5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.youngz-blog.asia" target="_blank">y0un92的知识库</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Web%E6%A1%86%E6%9E%B6/">Web框架</a><a class="post-meta__tags" href="/tags/Web%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">Web程序设计</a></div><div class="post_share"><div class="social-share" data-image="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202407172343020.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/08/15/%E5%89%8D%E7%AB%AF%E4%B8%89%E4%BB%B6%E5%A5%97/" title="前端三件套"><div class="cover" style="background:var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-15</div><div class="title">前端三件套</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://typora-666.oss-cn-shanghai.aliyuncs.com/imaes/202407172343020.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">y0un92</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/young-her"><i class="fab fa-github"></i><span>蕉个朋友💖</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/young-her" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a></div></div><div class="card-widget card-announcement"><div id="welcome-info"></div><script data-pjax="data-pjax">var ipLoacation,longitude="113.95692",Latitude="30.918746",txkey="SVQBZ-7PBWT-YMTXS-LRXKZ-YA7CS-RDBKL";window.onload=()=>{welcometxmap()},document.addEventListener("pjax:complete",welcometxmap())</script><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87"><span class="toc-number">2.</span> <span class="toc-text">前期准备</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">2.1.</span> <span class="toc-text">安装</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9D%E8%AF%86Django"><span class="toc-number">3.</span> <span class="toc-text">初识Django</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B"><span class="toc-number">3.1.</span> <span class="toc-text">快速上手</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%B7%AF%E7%94%B1"><span class="toc-number">3.2.</span> <span class="toc-text">自定义路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89app"><span class="toc-number">3.3.</span> <span class="toc-text">自定义app</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E8%AF%86%E8%A7%86%E5%9B%BE%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.</span> <span class="toc-text">初识视图函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E8%AF%86%E6%A8%A1%E6%9D%BF"><span class="toc-number">3.5.</span> <span class="toc-text">初识模板</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.6.</span> <span class="toc-text">操作数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.6.1.</span> <span class="toc-text">连接数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">3.6.2.</span> <span class="toc-text">定义数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">3.6.3.</span> <span class="toc-text">创建数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E9%A1%B9"><span class="toc-number">3.6.4.</span> <span class="toc-text">添加数据项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%95%B0%E6%8D%AE%E9%A1%B9"><span class="toc-number">3.6.5.</span> <span class="toc-text">查找数据项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E9%A1%B9"><span class="toc-number">3.6.6.</span> <span class="toc-text">更新数据项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E9%A1%B9"><span class="toc-number">3.6.7.</span> <span class="toc-text">删除数据项</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/18/%E5%85%A8%E5%90%8C%E6%80%81%E5%8A%A0%E5%AF%86%E5%85%A5%E9%97%A8/" title="全同态加密入门">全同态加密入门</a><time datetime="2024-09-18T15:43:05.000Z" title="发表于 2024-09-18 23:43:05">2024-09-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/09/02/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/" title="算法基础">算法基础</a><time datetime="2024-09-02T08:36:29.000Z" title="发表于 2024-09-02 16:36:29">2024-09-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/15/%E5%89%8D%E7%AB%AF%E4%B8%89%E4%BB%B6%E5%A5%97/" title="前端三件套">前端三件套</a><time datetime="2024-08-15T14:32:15.000Z" title="发表于 2024-08-15 22:32:15">2024-08-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/14/Django%E5%AE%9E%E8%B7%B5/" title="Django实践">Django实践</a><time datetime="2024-08-14T15:37:48.000Z" title="发表于 2024-08-14 23:37:48">2024-08-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/04/%E5%86%8D%E6%88%98upload/" title="再战upload">再战upload</a><time datetime="2024-08-04T14:29:19.000Z" title="发表于 2024-08-04 22:29:19">2024-08-04</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">©2024 By y0un92</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.<p><a target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://www.jsdelivr.com/"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a>&nbsp;<a target="_blank" href="https://vercel.com/"><img src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&amp;logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/"><img src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&amp;logo=Codio" title="本站采用双线部署，联通线路托管于Coding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typesetPromise();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"ams"},chtml:{scale:1.1},options:{renderActions:{findScript:[10,t=>{for(const e of document.querySelectorAll('script[type^="math/tex"]')){const a=!!e.type.match(/; *mode=display/),n=new t.options.MathItem(e.textContent,t.inputJax[0],a),s=document.createTextNode("");e.parentNode.replaceChild(s,e),n.start={node:s,delim:"",n:0},n.end={node:s,delim:"",n:0},t.math.push(n)}},""]}}};const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js",t.id="MathJax-script",t.async=!0,document.head.appendChild(t)}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/copy-tex.min.js"></script><script>document.querySelectorAll("#article-container span.katex-display").forEach((a=>{btf.wrap(a,"div",{class:"katex-wrap"})}))</script></div><script>let tianliGPT_postSelector="#post #article-container",tianliGPT_key="8e89f133bea253c412c7e32f4e2c4420ed9e1e"</script><script src="tianli_gpt.min.js"></script><script async data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><link rel="stylesheet" href="https://ai.tianli0.top/static/public/postChatUser_summary.min.css"><script>let tianliGPT_key="8e89f133bea253c412c7e32f4e2c4420ed9e1e",tianliGPT_postSelector="#postchat_postcontent",tianliGPT_Title="文章摘要",tianliGPT_postURL="/^https?://[^/]+/[0-9]{4}/[0-9]{2}/[0-9]{2}/",tianliGPT_blacklist="",tianliGPT_wordLimit="1000",tianliGPT_typingAnimate=!0;var postChatConfig={backgroundColor:"#3e86f6",bottom:"16px",left:"16px",fill:"#FFFFFF",width:"44px",frameWidth:"375px",frameHeight:"600px",defaultInput:!0,upLoadWeb:!0,showInviteLink:!0,userTitle:"PostChat",userDesc:"如果你对网站的内容有任何疑问，可以来问我哦～",addButton:!0}</script><script data-postchat_key="8e89f133bea253c412c7e32f4e2c4420ed9e1e" src="https://ai.tianli0.top/static/public/postChatUser_summary.min.js"></script><script async>window.onload=function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.type="text/javascript",e.async=!0,e.src="/sw-register.js?v="+Date.now(),t.parentNode.insertBefore(e,t)}</script></body></html>